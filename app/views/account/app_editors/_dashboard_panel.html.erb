<div class="h-full flex bg-gray-50 dark:bg-gray-900" data-controller="dashboard-tabs dashboard-deep-link" data-dashboard-deep-link-default-tab-value="overview">
  <!-- Left Navigation -->
  <div class="w-64 bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700 flex-shrink-0">
    <div class="p-4">
      <h2 class="text-sm font-medium text-gray-900 dark:text-white mb-4">Dashboard</h2>
      <nav class="space-y-1">
        <button class="w-full text-left px-3 py-2 text-sm font-medium text-gray-900 dark:text-white bg-gray-100 dark:bg-gray-700 border-r-2 border-primary-500 rounded-md"
                data-dashboard-tabs-target="tab" data-dashboard-deep-link-target="tab"
                data-panel="overview"
                data-action="click->dashboard-tabs#switchTab click->dashboard-deep-link#switchTab">
          <i class="fas fa-th-large mr-2"></i>
          Overview
        </button>
        
        <button class="w-full text-left px-3 py-2 text-sm font-medium text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-50 dark:hover:bg-gray-700 rounded-md"
                data-dashboard-tabs-target="tab" data-dashboard-deep-link-target="tab"
                data-panel="tables"
                data-action="click->dashboard-tabs#switchTab click->dashboard-deep-link#switchTab">
          <i class="fas fa-table mr-2"></i>
          Tables
        </button>
        
        <button class="w-full text-left px-3 py-2 text-sm font-medium text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-50 dark:hover:bg-gray-700 rounded-md"
                data-dashboard-tabs-target="tab" data-dashboard-deep-link-target="tab"
                data-panel="users"
                data-action="click->dashboard-tabs#switchTab click->dashboard-deep-link#switchTab">
          <i class="fas fa-users mr-2"></i>
          Users
        </button>
        
        <button class="w-full text-left px-3 py-2 text-sm font-medium text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-50 dark:hover:bg-gray-700 rounded-md"
                data-dashboard-tabs-target="tab" data-dashboard-deep-link-target="tab"
                data-panel="analytics"
                data-action="click->dashboard-tabs#switchTab click->dashboard-deep-link#switchTab">
          <i class="fas fa-chart-line mr-2"></i>
          Analytics
        </button>
        
        <button class="w-full text-left px-3 py-2 text-sm font-medium text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-50 dark:hover:bg-gray-700 rounded-md"
                data-dashboard-tabs-target="tab" data-dashboard-deep-link-target="tab"
                data-panel="domains"
                data-action="click->dashboard-tabs#switchTab click->dashboard-deep-link#switchTab">
          <i class="fas fa-globe mr-2"></i>
          Domains
        </button>
        
        <button class="w-full text-left px-3 py-2 text-sm font-medium text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-50 dark:hover:bg-gray-700 rounded-md"
                data-dashboard-tabs-target="tab" data-dashboard-deep-link-target="tab"
                data-panel="security"
                data-action="click->dashboard-tabs#switchTab click->dashboard-deep-link#switchTab">
          <i class="fas fa-shield-alt mr-2"></i>
          Security
        </button>
        
        <button class="w-full text-left px-3 py-2 text-sm font-medium text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-50 dark:hover:bg-gray-700 rounded-md"
                data-dashboard-tabs-target="tab" data-dashboard-deep-link-target="tab"
                data-panel="queries"
                data-action="click->dashboard-tabs#switchTab click->dashboard-deep-link#switchTab">
          <i class="fas fa-terminal mr-2"></i>
          Queries
        </button>
        
        <button class="w-full text-left px-3 py-2 text-sm font-medium text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-50 dark:hover:bg-gray-700 rounded-md"
                data-dashboard-tabs-target="tab" data-dashboard-deep-link-target="tab"
                data-panel="api"
                data-action="click->dashboard-tabs#switchTab click->dashboard-deep-link#switchTab">
          <i class="fas fa-code mr-2"></i>
          API Explorer
        </button>
        
        <button class="w-full text-left px-3 py-2 text-sm font-medium text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-50 dark:hover:bg-gray-700 rounded-md"
                data-dashboard-tabs-target="tab" data-dashboard-deep-link-target="tab"
                data-panel="realtime"
                data-action="click->dashboard-tabs#switchTab click->dashboard-deep-link#switchTab">
          <i class="fas fa-broadcast-tower mr-2"></i>
          Realtime
        </button>
        
        <button class="w-full text-left px-3 py-2 text-sm font-medium text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-50 dark:hover:bg-gray-700 rounded-md"
                data-dashboard-tabs-target="tab" data-dashboard-deep-link-target="tab"
                data-panel="settings"
                data-action="click->dashboard-tabs#switchTab click->dashboard-deep-link#switchTab">
          <i class="fas fa-cog mr-2"></i>
          Settings
        </button>
      </nav>
    </div>
  </div>
  
  <!-- Main Content Area -->
  <div class="flex-1 overflow-hidden">
    <!-- Overview Panel -->
    <div class="h-full overflow-y-auto p-6" data-dashboard-tabs-target="panel" data-dashboard-deep-link-target="panel" data-panel-name="overview">
      <div class="max-w-6xl mx-auto">
        <!-- App Header -->
        <div class="mb-8">
          <div class="flex items-center justify-between">
            <div class="flex items-center">
              <div class="w-12 h-12 bg-gradient-to-br from-purple-500 to-pink-500 rounded-lg flex items-center justify-center mr-4">
                <i class="fas fa-palette text-white text-xl"></i>
              </div>
              <div>
                <h1 class="text-2xl font-bold text-gray-900 dark:text-white"><%= app.name %></h1>
                <p class="text-gray-600 dark:text-gray-400">Created <%= time_ago_in_words(app.created_at) %> ago</p>
              </div>
            </div>
            <div class="flex items-center space-x-3">
              <button class="px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-50 dark:hover:bg-gray-600">
                <i class="fas fa-share mr-2"></i>Share App
              </button>
              <button class="px-4 py-2 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700">
                <i class="fas fa-rocket mr-2"></i>Publish
              </button>
            </div>
          </div>
        </div>
        
        <!-- App Description -->
        <div class="bg-white dark:bg-gray-800 rounded-lg p-6 mb-6 border border-gray-200 dark:border-gray-700">
          <h2 class="text-lg font-semibold text-gray-900 dark:text-white mb-2">About this app</h2>
          <p class="text-gray-600 dark:text-gray-400 leading-relaxed"><%= app.description || app.prompt %></p>
        </div>
        
        <!-- Quick Actions -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
          <!-- App Visibility -->
          <div class="bg-white dark:bg-gray-800 rounded-lg p-6 border border-gray-200 dark:border-gray-700">
            <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-4">App Visibility</h3>
            <p class="text-sm text-gray-600 dark:text-gray-400 mb-4">Control who can access your application</p>
            <div class="flex items-center justify-between">
              <div class="flex items-center">
                <i class="fas fa-globe text-blue-500 mr-2"></i>
                <span class="text-sm font-medium text-gray-900 dark:text-white">Public (Login Required)</span>
              </div>
              <button class="text-sm text-primary-600 hover:text-primary-700">Change</button>
            </div>
            <p class="text-xs text-gray-500 dark:text-gray-400 mt-2">Anyone can access but must log in first</p>
          </div>
          
          <!-- Invite Users -->
          <div class="bg-white dark:bg-gray-800 rounded-lg p-6 border border-gray-200 dark:border-gray-700">
            <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-4">Invite Users</h3>
            <p class="text-sm text-gray-600 dark:text-gray-400 mb-4">Grow your user base by inviting others</p>
            <div class="flex space-x-2">
              <button class="flex-1 px-3 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-md hover:bg-gray-200 dark:hover:bg-gray-600">
                <i class="fas fa-copy mr-2"></i>Copy Link
              </button>
              <button class="px-4 py-2 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700">
                Send Invites
              </button>
            </div>
          </div>
        </div>
        
        <!-- Stats Overview -->
        <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
          <div class="bg-white dark:bg-gray-800 rounded-lg p-4 border border-gray-200 dark:border-gray-700">
            <div class="flex items-center">
              <div class="p-2 bg-blue-100 dark:bg-blue-900 rounded-lg mr-3">
                <i class="fas fa-users text-blue-600 dark:text-blue-400"></i>
              </div>
              <div>
                <p class="text-2xl font-bold text-gray-900 dark:text-white"><%= app.visitor_count %></p>
                <p class="text-sm text-gray-600 dark:text-gray-400">Total Users</p>
              </div>
            </div>
          </div>
          
          <div class="bg-white dark:bg-gray-800 rounded-lg p-4 border border-gray-200 dark:border-gray-700">
            <div class="flex items-center">
              <div class="p-2 bg-green-100 dark:bg-green-900 rounded-lg mr-3">
                <i class="fas fa-eye text-green-600 dark:text-green-400"></i>
              </div>
              <div>
                <p class="text-2xl font-bold text-gray-900 dark:text-white"><%= app.daily_visitors.last %></p>
                <p class="text-sm text-gray-600 dark:text-gray-400">Today's Views</p>
              </div>
            </div>
          </div>
          
          <div class="bg-white dark:bg-gray-800 rounded-lg p-4 border border-gray-200 dark:border-gray-700">
            <div class="flex items-center">
              <div class="p-2 bg-purple-100 dark:bg-purple-900 rounded-lg mr-3">
                <i class="fas fa-code-branch text-purple-600 dark:text-purple-400"></i>
              </div>
              <div>
                <p class="text-2xl font-bold text-gray-900 dark:text-white"><%= app.app_versions.count %></p>
                <p class="text-sm text-gray-600 dark:text-gray-400">Versions</p>
              </div>
            </div>
          </div>
          
          <div class="bg-white dark:bg-gray-800 rounded-lg p-4 border border-gray-200 dark:border-gray-700">
            <div class="flex items-center">
              <div class="p-2 bg-orange-100 dark:bg-orange-900 rounded-lg mr-3">
                <i class="fas fa-database text-orange-600 dark:text-orange-400"></i>
              </div>
              <div>
                <p class="text-2xl font-bold text-gray-900 dark:text-white"><%= app.app_files.count %></p>
                <p class="text-sm text-gray-600 dark:text-gray-400">Files</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Tables Panel -->
    <div class="h-full overflow-y-auto p-6 hidden" data-dashboard-tabs-target="panel" data-dashboard-deep-link-target="panel" data-panel-name="tables"
         data-controller="database-manager"
         data-database-manager-app-id-value="<%= app.id %>">
      <div class="max-w-6xl mx-auto">
        <div class="mb-6">
          <div class="flex items-center justify-between">
            <div>
              <h1 class="text-2xl font-bold text-gray-900 dark:text-white mb-2">Database</h1>
              <p class="text-gray-600 dark:text-gray-400">Manage your app's data tables and schema</p>
            </div>
            <button class="px-4 py-2 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700"
                    data-action="click->database-manager#showCreateTableModal">
              <i class="fas fa-plus mr-2"></i>Create Table
            </button>
          </div>
        </div>
        
        <!-- Tables List -->
        <div class="space-y-4" data-database-manager-target="tablesContainer">
          <!-- Tables will be loaded dynamically -->
          <div class="bg-white dark:bg-gray-800 rounded-lg p-8 border border-gray-200 dark:border-gray-700 text-center">
            <div class="w-12 h-12 bg-gray-100 dark:bg-gray-700 rounded-full flex items-center justify-center mx-auto mb-4">
              <i class="fas fa-spinner fa-spin text-gray-400"></i>
            </div>
            <p class="text-gray-600 dark:text-gray-400">Loading tables...</p>
          </div>
        </div>
        
        <!-- Create Table Modal -->
        <div class="fixed inset-0 bg-black bg-opacity-50 hidden z-50" data-database-manager-target="createTableModal">
          <div class="flex items-center justify-center min-h-screen p-4">
            <div class="bg-white dark:bg-gray-800 rounded-lg p-6 w-full max-w-md">
              <div class="flex items-center justify-between mb-4">
                <h3 class="text-lg font-semibold text-gray-900 dark:text-white">Create New Table</h3>
                <button class="text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"
                        data-action="click->database-manager#hideCreateTableModal">
                  <i class="fas fa-times"></i>
                </button>
              </div>
              
              <form data-action="submit->database-manager#createTable">
                <div class="mb-4">
                  <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                    Table Name
                  </label>
                  <input type="text" 
                         name="name" 
                         required
                         pattern="[a-zA-Z][a-zA-Z0-9_]*"
                         class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white"
                         placeholder="e.g., users, posts, comments">
                  <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">
                    Must start with a letter and contain only letters, numbers, and underscores
                  </p>
                </div>
                
                <div class="mb-6">
                  <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                    Description (optional)
                  </label>
                  <textarea name="description" 
                            rows="3"
                            class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white"
                            placeholder="Describe what this table stores..."></textarea>
                </div>
                
                <div class="flex space-x-3">
                  <button type="button" 
                          class="flex-1 px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-md hover:bg-gray-200 dark:hover:bg-gray-600"
                          data-action="click->database-manager#hideCreateTableModal">
                    Cancel
                  </button>
                  <button type="submit" 
                          class="flex-1 px-4 py-2 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700">
                    Create Table
                  </button>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Other panels (placeholder for now) -->
    <div class="h-full overflow-y-auto p-6 hidden" data-dashboard-tabs-target="panel" data-dashboard-deep-link-target="panel" data-panel-name="users">
      <div class="max-w-6xl mx-auto">
        <h1 class="text-2xl font-bold text-gray-900 dark:text-white mb-4">Users</h1>
        <p class="text-gray-600 dark:text-gray-400">User management coming soon...</p>
      </div>
    </div>
    
    <div class="h-full overflow-y-auto p-6 hidden" data-dashboard-tabs-target="panel" data-dashboard-deep-link-target="panel" data-panel-name="analytics">
      <div class="max-w-6xl mx-auto">
        <h1 class="text-2xl font-bold text-gray-900 dark:text-white mb-4">Analytics</h1>
        <p class="text-gray-600 dark:text-gray-400">Analytics dashboard coming soon...</p>
      </div>
    </div>
    
    <div class="h-full overflow-y-auto p-6 hidden" data-dashboard-tabs-target="panel" data-dashboard-deep-link-target="panel" data-panel-name="domains">
      <div class="max-w-6xl mx-auto">
        <h1 class="text-2xl font-bold text-gray-900 dark:text-white mb-4">Domains</h1>
        <p class="text-gray-600 dark:text-gray-400">Custom domain management coming soon...</p>
      </div>
    </div>
    
    <div class="h-full overflow-y-auto p-6 hidden" data-dashboard-tabs-target="panel" data-dashboard-deep-link-target="panel" data-panel-name="security">
      <div class="max-w-6xl mx-auto">
        <h1 class="text-2xl font-bold text-gray-900 dark:text-white mb-4">Security</h1>
        <p class="text-gray-600 dark:text-gray-400">Security settings coming soon...</p>
      </div>
    </div>
    
    <!-- Queries Panel -->
    <div class="h-full overflow-y-auto p-6 hidden" data-dashboard-tabs-target="panel" data-dashboard-deep-link-target="panel" data-panel-name="queries">
      <div class="max-w-6xl mx-auto">
        <h1 class="text-2xl font-bold text-gray-900 dark:text-white mb-4">SQL Queries</h1>
        <p class="text-gray-600 dark:text-gray-400">Run SQL queries against your database...</p>
      </div>
    </div>
    
    <!-- API Explorer Panel -->
    <div class="h-full overflow-y-auto p-6 hidden" data-dashboard-tabs-target="panel" data-dashboard-deep-link-target="panel" data-panel-name="api">
      <div class="max-w-6xl mx-auto">
        <h1 class="text-2xl font-bold text-gray-900 dark:text-white mb-4">API Explorer</h1>
        <p class="text-gray-600 dark:text-gray-400">Test your app's API endpoints...</p>
      </div>
    </div>
    
    <!-- Realtime Panel -->
    <div class="h-full overflow-y-auto p-6 hidden" data-dashboard-tabs-target="panel" data-dashboard-deep-link-target="panel" data-panel-name="realtime">
      <div class="max-w-6xl mx-auto">
        <h1 class="text-2xl font-bold text-gray-900 dark:text-white mb-4">Realtime</h1>
        <p class="text-gray-600 dark:text-gray-400">Configure realtime subscriptions...</p>
      </div>
    </div>
    
    <div class="h-full overflow-y-auto p-6 hidden" data-dashboard-tabs-target="panel" data-dashboard-deep-link-target="panel" data-panel-name="settings">
      <div class="max-w-6xl mx-auto">
        <h1 class="text-2xl font-bold text-gray-900 dark:text-white mb-4">Settings</h1>
        <p class="text-gray-600 dark:text-gray-400">App settings coming soon...</p>
      </div>
    </div>
  </div>
</div>