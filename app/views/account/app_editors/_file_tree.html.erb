<div id="file_tree" class="w-64 bg-gray-800 border-r border-gray-700 overflow-y-auto" data-controller="file-tree">
  <div class="p-3">
    <div class="flex items-center justify-between mb-3">
      <h3 class="text-xs font-semibold text-gray-400 uppercase tracking-wider">Files</h3>
      <button class="text-gray-500 hover:text-gray-300" title="Add file">
        <i class="fas fa-plus text-xs"></i>
      </button>
    </div>
    
    <div class="space-y-0.5">
      <% if files.any? %>
        <% # For now, show flat file list - can enhance to tree structure later %>
        <% files.group_by { |f| File.dirname(f.path) }.each do |dir, dir_files| %>
          <% if dir != "." %>
            <div class="group" data-file-tree-target="folder">
              <div class="flex items-center px-2 py-1 text-sm text-gray-400 hover:bg-gray-700 rounded cursor-pointer"
                   data-action="click->file-tree#toggleFolder">
                <i class="fas fa-folder text-yellow-600 mr-2" data-file-tree-target="icon"></i>
                <span class="truncate"><%= dir %></span>
              </div>
              <div class="ml-4 hidden" data-file-tree-target="children">
                <% dir_files.each do |file| %>
                  <%= render "file_tree_item", file: file, selected: file == selected_file %>
                <% end %>
              </div>
            </div>
          <% else %>
            <% dir_files.each do |file| %>
              <%= render "file_tree_item", file: file, selected: file == selected_file %>
            <% end %>
          <% end %>
        <% end %>
      <% else %>
        <div class="text-center py-8 text-gray-500">
          <i class="fas fa-folder-open text-2xl mb-2"></i>
          <p class="text-xs">No files yet</p>
        </div>
      <% end %>
    </div>
  </div>
</div>