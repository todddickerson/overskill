<%= render 'account/shared/page' do |p| %>
  <% p.content_for :title, t('.header', teams_possessive: possessive_string(@team.name)) %>

  <% p.content_for :body do %>
    <% rendered = render 'account/shared/box' do |box| %>
      <% box.title "Team Overview" %>
      <% box.description "Manage your team's apps, collaborators, and activity." %>
      
      <% box.body do %>
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8">
          <!-- Apps Stats -->
          <div class="bg-blue-50 rounded-lg p-6 border border-blue-200">
            <div class="flex items-center justify-between">
              <div>
                <p class="text-sm font-medium text-blue-600">Total Apps</p>
                <p class="text-3xl font-bold text-blue-900"><%= @team.apps.count %></p>
              </div>
              <div class="text-blue-400">
                <svg class="w-8 h-8" fill="currentColor" viewBox="0 0 20 20">
                  <path d="M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z"/>
                </svg>
              </div>
            </div>
            <div class="mt-2">
              <span class="text-sm text-blue-600">
                <%= @team.apps.where(status: 'published').count %> published
              </span>
            </div>
          </div>

          <!-- Recent Activity -->
          <div class="bg-green-50 rounded-lg p-6 border border-green-200">
            <div class="flex items-center justify-between">
              <div>
                <p class="text-sm font-medium text-green-600">Recent Generations</p>
                <p class="text-3xl font-bold text-green-900">
                  <%= AppGeneration.joins(:app).where(app: { team: @team }).where('app_generations.created_at > ?', 7.days.ago).count %>
                </p>
              </div>
              <div class="text-green-400">
                <svg class="w-8 h-8" fill="currentColor" viewBox="0 0 20 20">
                  <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-8.293l-3-3a1 1 0 00-1.414 1.414L10.586 9.5H7a1 1 0 100 2h3.586l-1.293 1.293a1 1 0 101.414 1.414l3-3a1 1 0 000-1.414z" clip-rule="evenodd"/>
                </svg>
              </div>
            </div>
            <div class="mt-2">
              <span class="text-sm text-green-600">Last 7 days</span>
            </div>
          </div>

          <!-- Team Members -->
          <div class="bg-purple-50 rounded-lg p-6 border border-purple-200">
            <div class="flex items-center justify-between">
              <div>
                <p class="text-sm font-medium text-purple-600">Team Members</p>
                <p class="text-3xl font-bold text-purple-900"><%= @team.memberships.count %></p>
              </div>
              <div class="text-purple-400">
                <svg class="w-8 h-8" fill="currentColor" viewBox="0 0 20 20">
                  <path d="M9 6a3 3 0 11-6 0 3 3 0 016 0zM17 6a3 3 0 11-6 0 3 3 0 016 0zM12.93 17c.046-.327.07-.66.07-1a6.97 6.97 0 00-1.5-4.33A5 5 0 0119 16v1h-6.07zM6 11a5 5 0 015 5v1H1v-1a5 5 0 015-5z"/>
                </svg>
              </div>
            </div>
          </div>
        </div>
      <% end %>
    <% end %>

    <!-- Apps Section -->
    <%= render 'account/apps/index', apps: @team.apps, hide_back: true %>
    
    <!-- Team Management Sections -->
    <%= render 'account/creator_profiles/index', creator_profiles: @team.creator_profiles, hide_back: true %>
    <%= render 'account/follows/index', follows: @team.follows, hide_back: true %>
    <%# ðŸš… super scaffolding will insert new children above this line. %>
    
    <%= render 'account/scaffolding/absolutely_abstract/creative_concepts/index', creative_concepts: @team.scaffolding_absolutely_abstract_creative_concepts, hide_back: true unless scaffolding_things_disabled? %>
  <% end %>
<% end %>
