<% if content_for? :title %>
  <%= yield :title %>
<% elsif @title.present? %>
  <title><%= @title %> | <%= t('application.name') %></title>
<% else %>
  <title><%= t('application.name') %></title>
<% end %>

<meta charset="utf-8" />
<meta content="ie=edge" http-equiv="x-ua-compatible" />
<meta content="<%= t('application.keywords') %>" name="keywords" />
<meta content="<%= t('application.description') %>" name="description" />
<meta content="width=device-width, initial-scale=1" name="viewport" />

<meta name="mobile-web-app-capable" content="yes" />

<%= csrf_meta_tags %>

<meta name="turbo-cache-control" content="no-cache">

<% if cloudinary_enabled? %>
<script src="https://upload-widget.cloudinary.com/2.1.15/global/all.js" type="text/javascript"></script>
<% end %>

<meta name="intl_tel_input_utils_path" content="<%= asset_path("intl-tel-input-utils.js") %>">

<%= render 'magic_test/support' if Rails.env.test? %>

<%= capybara_lockstep if defined?(Capybara::Lockstep) %>

<% # put your application-specific additions below to avoid merge conflicts later. %>

<% # Font Awesome Free CDN %>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" integrity="sha512-Evv84Mr4kqVGRNSgIGL/F/aIDqQb7xQ2vcrdIwxfjThSH8CSR7PBEakCr51Ck+w+/U6swU2Im1vVX0SVk9ABhg==" crossorigin="anonymous" referrerpolicy="no-referrer" />

<% # Ahoy analytics tracking %>
<%= javascript_include_tag "https://unpkg.com/ahoy.js@0.4.2/dist/ahoy.js" %>
<script>
  ahoy.configure({
    urlPrefix: "",
    visitsUrl: "/ahoy/visits",
    eventsUrl: "/ahoy/events",
    cookieDomain: null,
    page: null,
    platform: "Web",
    useBeacon: true,
    startOnReady: true,
    trackVisits: true,
    cookies: true,
    cookieName: "ahoy_visit",
    visitorCookieName: "ahoy_visitor",
    visitDuration: 30 * 60, // 30 minutes
    visitTtl: 24 * 60 * 60 // 24 hours
  });
</script>
